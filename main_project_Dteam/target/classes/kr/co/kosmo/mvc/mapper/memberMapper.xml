<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	<insert id="in" parameterType="memvo">
		insert into member values (member_seq.nextVal, #{mem_id}, #{mem_pwd},
		#{mem_name},
		#{mem_nickname}, #{mem_age}, #{mem_gender}, #{mem_birth}, #{mem_tel}, #{mem_addr},
		'None', sysdate)
	</insert>

	<select id="login" parameterType="memvo" resultType="memvo">
		select * from member where mem_id=#{mem_id} and mem_pwd=#{mem_pwd}
	</select>

	<select id="idchk" parameterType="String" resultType="int">
		select COUNT(*) cnt from member where mem_id = #{mem_id}
	</select>
	
	<!-- 홍영의: 회원번호를 바탕으로 회원 아이디 반환 받음 -->
	<select id="getMemberID" parameterType="int" resultType="String">
		select mem_id from member where mem_num=#{mem_num}
	</select>
	<!-- 홍영의: 회원번호를 바탕으로 회원 프로필 이미지 반환 받음 -->
	<select id="getMemberProfile" parameterType="int" resultType="String">
		select mem_profile from member where mem_num=#{mem_num}
	</select>

	<!-- 이재영: 회원집 정보를 받아서 넣음 -->
	<insert id="addMemberHouseInfo" parameterType="hinvo">
	insert into houseinfo values(houseinfo_seq.nextVal,#{mem_id},#{hinfo_type},#{hinfo_size},#{hinfo_with},#{hinfo_tend},#{hinfo_favour},#{hinfo_buytend},
	#{hinfo_style},#{hinfo_activity},#{hinfo_visible},sysdate)
	
	</insert>
	<select id="getMemberHouseInfo" parameterType="string" resultType="hinvo">
	select * from houseinfo where  mem_id=#{mem_id} and hinfo_visible=0 order by hinfo_date desc
	
	</select>
	<delete id="delMemberHouseInfo" parameterType="int">
	update houseinfo set hinfo_visible=1 where hinfo_num=#{hinfo_num} 
	</delete>

	<!-- 김세연: 회원번호로 회원 정보 반환 받음 -->
	<select id="getMemberName" parameterType="int" resultType="memvo">
		select mem_id,mem_pwd,mem_name,mem_nickname,mem_age,mem_gender,mem_birth,mem_tel,mem_addr,mem_profile from member where mem_num=#{mem_num}
	</select>
	
	<!-- 정재윤: 회원아이디로 회원 정보 반환 받음 -->
	<select id="getMemInfoId" parameterType="String" resultType="memvo">
		select mem_id,mem_pwd,mem_name,mem_nickname,mem_age,mem_gender,mem_birth,mem_tel,mem_addr,mem_profile from member where mem_id=#{mem_id}
	</select>

</mapper>
